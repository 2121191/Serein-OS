# xv6-k210 v2.3 发布说明

**版本**: v2.3-release
**日期**: 2026-01-01
**状态**: 正式发布 (Integration V2)

我们很高兴宣布 **xv6-k210 v2.3** 的发布。此版本是项目的一个重要里程碑，标志着内核在 POSIX 兼容性、进程管理性能和 I/O 能力上达到了新的高度。本版本集成了 Phase 3 的核心扩展性改进、先进的内存监控工具，以及稳健的信号基础设施。

> **注意**: 本版本专注于核心稳定性与性能。部分实验性功能（如 WFI 调度器及分级日志）已推迟至后续版本。

---

## 🚀 新特性 (New Features)

### 核心性能与 I/O
*   **PID 哈希表 (O(1) 查找)**:  
    引入全局 PID 哈希表取代了传统的线性进程扫描。这一改进将 `kill(2)` 和 `wait(2)` 等关键系统调用的时间复杂度从 **O(N)** 降低至 **O(1)**，显著提升了高并发场景下的系统可扩展性。
*   **非阻塞 I/O 支持**:  
    *   完整支持 `O_NONBLOCK` 文件状态标志。
    *   更新了管道 (`pipe`) 实现，在非阻塞模式下读写将立即返回 `-1` (EAGAIN) 而非休眠。
    *   新增 `sys_pipe2` 系统调用，允许在创建管道时原子地设置标志位。

### 内存管理与监控
*   **系统可视性 (`vmstat`)**:  
    新增用户态工具 `vmstat`，支持实时监控内存使用情况、CPU 上下文切换次数及中断频率。
*   **`mincore(2)` 系统调用**:  
    实现了 `mincore` 系统调用，允许查询虚拟内存页的物理驻留状态。这对于验证和调试 Lazy Allocation（延迟分配）机制至关重要。

---

## 🛠 基础设施与改进 (Infrastructure)

*   **POSIX 信号系统 (V2.1)**:  
    交付了一套完整的信号框架，支持标准 POSIX 信号（如 `SIGINT`, `SIGKILL` 等）及异步信号处理。
*   **设备驱动集成**:  
    集成了标准的特殊设备文件：
    *   `/dev/null`: 丢弃所有写入的数据。
    *   `/dev/zero`: 提供无限的空字节流。
*   **UART 驱动优化**:  
    改进了 UART 中断处理逻辑，显著提升了控制台交互的稳定性与数据吞吐能力。

---

## 🐛 缺陷修复 (Bug Fixes)

*   **共享内存 (IPC)**:  
    修复了 `kernel/shm.c` 中关于引用计数与内存清理的关键逻辑错误，确保了进程间通信的可靠性与内存安全。

---

## 验证结论

所有核心功能均已通过回归测试：
*   ✅ **usertests**: 全部通过。
*   ✅ **nbtest**: 非阻塞 I/O 行为验证通过。
*   ✅ **基础组件**: 信号发送与控制台交互验证正常。
