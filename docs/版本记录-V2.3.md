# xv6-k210 V2.3 版本记录

**版本**: V2.3  
**日期**: 2026-01-01

---

## 新特性

### PID 哈希表

引入全局 PID 哈希表，`kill()` 和 `wait()` 从 O(N) 线性扫描变成 O(1) 查找。高进程数场景下性能提升明显。

### 非阻塞 I/O

- 管道支持 `O_NONBLOCK`，非阻塞模式下读写立即返回 -1 (EAGAIN)
- 新增 `pipe2` 系统调用，创建管道时可以直接设置标志

### 内存监控

- 新增 `vmstat` 工具，查看内存使用、上下文切换、中断频率
- 实现 `mincore` 系统调用，查询页面是否驻留物理内存

---

## 基础设施

### 信号系统

完成 POSIX 信号框架，支持 SIGINT、SIGKILL 等标准信号和异步处理。

### 设备驱动

- `/dev/null`: 丢弃写入数据
- `/dev/zero`: 读取返回空字节

### UART 优化

改进中断处理逻辑，控制台交互更稳定。

---

## Bug 修复

### 共享内存引用计数

`kernel/shm.c` 的引用计数逻辑有问题，进程退出后共享内存可能不释放。修复了计数和清理逻辑。

---

## 验证

- usertests: 全部通过
- nbtest: 非阻塞行为正确
- 信号和控制台测试正常
